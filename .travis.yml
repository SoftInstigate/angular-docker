services:
  - docker
script:
  - docker build --build-arg NODE_VERSION=$NODE -t softinstigate/angular-docker .
  - docker tag softinstigate/angular-docker:latest softinstigate/angular-docker:$NODE
after_success:
  - if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then
      echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
      docker push softinstigate/angular-docker:$NODE;
      docker push softinstigate/angular-docker:latest;
    fi
env:
  global:
    - NODE=10.17
